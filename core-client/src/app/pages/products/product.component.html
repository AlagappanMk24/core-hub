<div class="container">
  <div class="controls">
    <button (click)="switchDisplayMode('trending')" [class.active]="displayMode === 'trending'">Trending Products</button>
    <button (click)="switchDisplayMode('all')" [class.active]="displayMode === 'all'">All Products</button>
    <a routerLink="/cart" class="cart-link">View Cart</a>
  </div>

  <div *ngIf="isLoading" class="loading">Loading products...</div>
  <div *ngIf="errorMessage" class="error">{{ errorMessage }}</div>

  <div class="product-grid">
    <div *ngFor="let product of products" class="product-card">
      <div class="product-image">
        <img [src]="product.image" [alt]="product.name" />
        <div *ngIf="product.badge" class="badge" [ngClass]="product.badge.type">
          {{ product.badge.text }}
        </div>
      </div>
      <div class="product-info">
        <h3>{{ product.name }}</h3>
        <p class="category">{{ product.category }}</p>
        <div class="price">
          <span class="current-price">${{ product.currentPrice | number:'1.2-2' }}</span>
          <span *ngIf="product.originalPrice" class="original-price">${{ product.originalPrice | number:'1.2-2' }}</span>
        </div>
        <div class="actions">
          <button (click)="toggleWishlist(product)" [ngClass]="{'active': product.isWishlisted}">
            <i class="fas fa-heart"></i>
          </button>
          <button (click)="toggleCompare(product)" [ngClass]="{'active': product.isCompared}">
            <i class="fas fa-balance-scale"></i>
          </button>
          <button (click)="addToCart(product)">
            <i class="fas fa-shopping-cart"></i> Add to Cart
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="summary">
    <p>Wishlisted: {{ getWishlistedProducts().length }}</p>
    <p>Comparing: {{ getComparedProducts().length }} <button *ngIf="getComparedProducts().length" (click)="clearComparedProducts()">Clear Compare</button></p>
  </div>
</div>